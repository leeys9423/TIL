# 헥사고날 아키텍쳐 (Hexagonal Architecture)

## 헥사고날 아키텍쳐란?

> 육각형 아키텍쳐 또는 **포트 및 어댑터** 아키텍쳐는 소프트웨어 설계에 사용되는 아키텍쳐 패턴입니다. 이 패턴은 포트와 어댑터를 통해 소프트웨어 환경에 쉽게 연결할 수 있는 **느슨하게 결합**된 애플리케이션 구성 요소를 만드는 것을 목표로 합니다. 이를 통해 모든 수준에서 구성 요소를 교환할 수 있고 **테스트 자동화가 용이**해집니다. - 출처: 위키피디아

위 단락을 읽어 봤을 때, 중요하게 생각한 용어는 **포트와 어댑터**, **느슨한 결합**라고 생각합니다.

## 기본 구조

```
외부 세계 ↔ [Adapter] ↔ [Port] ↔ [Application Core] ↔ [Port] ↔ [Adapter] ↔ 외부 세계
```

**의존성 방향**: 모든 의존성은 외부에서 내부(애플리케이션 핵심)로 향해야 함

## 주요 용어 정리

1. **애플리케이션 핵심(Application Core)**

   - 도메인 로직이 위치하는 중앙 영역
   - 비즈니스 규칙과 핵심 로직을 포함
   - 외부 세계에 대한 의존성이 없어야 함

2. **포트(Ports)**

   - 애플리케이션 핵심과 외부 세계를 연결하는 **인터페이스**
   - 두 종류로 구분:
     - Primary Port (Driving Port): 애플리케이션을 호출하는 인터페이스(사용자가 앱을 호출)
     - Secondary Port (Driven Port): 애플리케이션이 호출하는 인터페이스(앱이 외부 서비스 호출)

3. **어댑터(Adapters)**

   - 포트의 구체적인 구현체
   - 외부 기술과 실제로 통신하는 역할
   - 두 종류로 구분:
     - Primary Adapter (Driving Adapter): 애플리케이션을 호출
     - Secondary Adapter (Driven Adapter): 애플리케이션에 의해 호출

4. **느슨한 결합**
   - 시스템의 구성 요소들이 서로에 대한 **의존성을 최소화**하여, 한 요소의 변경이 다른 요소에 미치는 **영향을 줄이는 설계 원칙**
   - 장점:
     1. **유연성(Flexibility)**
        - 예: MySQL에서 MongoDB로 변경 시 Repository Adapter만 교체
     2. **테스트 용이성(Testability)**
        - 순수한 단위 테스트 가능
        - 비즈니스 로직에만 집중
        - 외부 의존성 없이 빠르게 실행
        - 테스트의 의도가 명확
        - 예: Mock 객체로 데이터베이스 없이 비즈니스 로직 테스트 가능
     3. **재사용성(Reusability)**
     4. **유지보수성(Maintainability)**

## 핵심 원칙

- **의존성 역전**: 구체적인 구현체가 아닌 인터페이스에 의존
- **관심사의 분리**: 비즈니스 로직과 기술적 관심사를 분리
- **단일 책임**: 각 어댑터는 하나의 외부 기술에 대해서만 책임

## 주의사항

- 과도한 추상화는 피하기 (단순한 로직에는 불필요)
- 성능 고려 (간접 호출로 인한 약간의 오버헤드)
