# 스프링 핵심 원리 이해

## Agile

'민첩한, 기민한'이라는 뜻으로, 소프트웨어 개발 및 프로젝트 관리에 있어 변화에 유연하게 대처하고 고객 만족을 위해 점진적으로 결과물을 전달하는 방법론

## OCP (Open-Closed Principle)

- 확장에는 열려있고, 수정에는 닫혀있어야 한다.
- 기존 코드를 건드리지 않고 새로운 기능을 추가할 수 있어야 한다

## DIP (Dependency Inversion Principle)

- 구체적인 것에 의존하지 말고, 추상적인 것에 의존하라

```java
// 위반 코드
// 이유: 추상뿐만 아니라 구체 클래스에도 의존하고 있음
public class OrderServiceImpl implements OrderService {
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
}
```

### 해결방안

누군가 클라이언트의 구현 객체를 대신 생성하고 주입해주어야 한다.

## 관심사 분리

클라이언트 코드와 구현 객체를 생성하고, 연결하는 책임을 가지는 별도의 설정 클래스를 만들어서 관리하자!!

```java
public class AppConfig {
    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(
            new MemoryMemberRepository(),
            new FixDiscountPolicy());
    }
}
```

AppConfig는 애플리케이션의 실제 동작에 필요한 **구현 객체를 생성**한다.

이렇게 하므로 SRP 원칙도 지켜짐.

## SRP (Single Responsibility Principle)

- 클라이언트 객체는 실행하는 책임만 담당
- 구현 객체를 생성하고 연결하는 책임은 AppConfig가 담당

## IoC, DI, 그리고 컨테이너

### 제어의 역전 (Inversion of Control)

- 기존 프로그램은 클라이언트 구현 객체가 스스로 필요한 서버 구현 객체를 생성하고, 연결하고, 실행했다. 한마디로 구현 객체가 프로그램의 제어 흐름을 스스로 조종했다.
- AppConfig가 등장한 이우에 구현 객체는 자신의 로직을 실행하는 역할만 담당한다. 프로그램의 제어 흐름은 이제 AppConfig가 가져간다.
- 프로그램에 대한 제어 흐름에 권한은 모두 AppConfig가 가지고 있다.
- 이렇듯 프로그램의 제어 흐름을 직접 제어하는 것이 아니라 **외부에서 관리하는 것**을 제어의 역전(IoC)이라 한다.

### 의존관계 주입 DI (Dependency Injection)

- 클라이언트가 인터페이스에 의존하면서, 실제 어떤 구현 객체가 사용될지는 모른다.
- 의존관계는 정적인 클래스 의존 관계와, 실행 시점에 결정되는 동적인 객체(인스턴스) 의존 관계 둘을 분리해서 생각해야 한다.

### 정리

스프링은 DI를 통해 IoC를 구현해준다.
