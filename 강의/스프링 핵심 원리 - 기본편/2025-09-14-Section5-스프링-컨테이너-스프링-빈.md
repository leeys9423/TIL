# 스프링 컨테이너와 스프링 빈

## 스프링 컨테이너

객체(빈)의 생명주기를 관리하고 의존관계를 주입해주는 프레임워크의 핵심 구성요소입니다.

### 핵심 역할

1. 객체 생성: 설정 정보를 바탕으로 필요한 객체들을 생성
2. 의존관계 주입: 객체들 간의 의존관계를 자동으로 연결
3. 생명주기 관리: 객체의 초기화, 사용, 소멸까지 전체 과정 관리

### 스프링 컨테이너 생성

- ApplicationContext를 스프링 컨테이너라 한다.
- 스프링 컨테이너는 XML을 기반으로 만들 수 있고, 애노테이션 기반의 자바 설정 클래스로 만들 수 있다.

> 더 정확히는 스프링 컨테이너를 부를 때 `BeanFactory`, `ApplicationContext`로 구분해서 이야기한다.
>
> `BeanFactory`를 직접 사용하는 경우는 거의 없으므로 일반적으로 `ApplicationContext`를 스프링 컨테이너라 한다.

### 생성 과정

- `new AnnotationConfigApplicationContext(AppConfig.class)`
- 스프링 컨테이너를 생성할 때 구성 정보를 지정
- 메서드의 이름으로 빈 이름이 생성됨(기본)

## 스프링 빈

스프링 IoC 컨테이너가 관리하는 객체입니다. 일반 Java 객체와 달리 스프링이 생성, 관리, 소멸까지 책임지는 특별한 객체입니다.

### 조회

- getBean(빈이름, 타입), getBean(타입)
  - 조회 대상이 스프링 빈으로 관리 되지 않으면 예외 발생 (NoSuchBeanDefinitionException)
- ac.getBeansOfType() 타입으로 조회 시 같은 타입의 스프링 빈이 둘 이상이면 오류가 발생
- 부모 타입으로 조회하면, 자식 타입도 함께 조회된다.

### 설정 메타 정보 - BeanDefinition

- 스프링은 어떻게 다양한 설정 형식을 지원하는 것일까? `BeanDefinition`이라는 추상화가 있다.
  - XML을 읽거나, 자바 코드를 읽거나, 혹은 그 외에 BeanDefinition의 구현체만 있으면 된다.
- `BeanDefinition`을 빈 설정 메타정보라 한다.
- 스프링 컨테이너는 이 메타정보를 기반으로 스프링 빈을 생성한다.
