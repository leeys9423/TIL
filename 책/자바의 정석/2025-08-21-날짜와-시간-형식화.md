# 날짜와 시간 & 형식화

## 1. 날짜와 시간

### 1.1 Calendar와 Date

**Date 클래스의 한계**

- Date 클래스는 JDK 1.0부터 제공되었지만 기능이 부족
- 대부분의 메서드가 deprecated됨
- Calendar 클래스로 대체 권장

**Calendar 클래스**

```java
Calendar cal = Calendar.getInstance(); // 현재 날짜와 시간
int year = cal.get(Calendar.YEAR);
int month = cal.get(Calendar.MONTH) + 1; // 0부터 시작하므로 +1
int day = cal.get(Calendar.DAY_OF_MONTH);
```

### 1.2 Calendar 필드와 상수

주요 필드들:

- `YEAR`, `MONTH`, `DAY_OF_MONTH`
- `HOUR_OF_DAY` (24시간), `HOUR` (12시간)
- `MINUTE`, `SECOND`, `MILLISECOND`
- `DAY_OF_WEEK` (요일: 1=일요일, 7=토요일)

### 1.3 Date와 Calendar 간의 변환

```java
// Calendar → Date
Calendar cal = Calendar.getInstance();
Date date = new Date(cal.getTimeInMillis());

// Date → Calendar
Date date = new Date();
Calendar cal = Calendar.getInstance();
cal.setTime(date);
```

## 2. 형식화 클래스

### 2.1 DecimalFormat

**숫자 형식화**

```java
DecimalFormat df = new DecimalFormat("#,###.##");
String result = df.format(1234567.89); // "1,234,567.89"
```

**패턴 기호**

- `0`: 빈 자리를 0으로 채움
- `#`: 빈 자리는 채우지 않음
- `,`: 천 단위 구분자
- `.`: 소수점
- `%`: 백분율

### 2.2 SimpleDateFormat

**날짜 형식화**

```java
Date now = new Date();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String strDate = sdf.format(now); // "2023-12-25 14:30:45"
```

**주요 패턴**

- `yyyy`: 년도 (4자리)
- `MM`: 월 (01~12)
- `dd`: 일 (01~31)
- `HH`: 시간 (00~23)
- `mm`: 분 (00~59)
- `ss`: 초 (00~59)
- `E`: 요일
- `a`: AM/PM

**문자열을 Date로 변환**

```java
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
Date date = sdf.parse("2023-12-25");
```

### 2.3 ChoiceFormat

**조건에 따른 문자열 선택**

```java
double[] limits = {60, 70, 80, 90};
String[] grades = {"D", "C", "B", "A"};
ChoiceFormat form = new ChoiceFormat(limits, grades);

System.out.println(form.format(85)); // "B"
```

### 2.4 MessageFormat

**문자열에 값을 대입**

```java
String msg = "이름: {0}, 나이: {1}";
MessageFormat mf = new MessageFormat(msg);
String result = mf.format(new Object[]{"홍길동", 25});
// "이름: 홍길동, 나이: 25"
```

## 3. java.time 패키지 (Java 8+)

### 3.1 새로운 날짜/시간 API의 특징

- 불변(immutable) 객체
- 스레드 세이프
- 직관적인 메서드명
- 타임존 지원 강화

### 3.2 주요 클래스들

**LocalDate, LocalTime, LocalDateTime**

```java
LocalDate date = LocalDate.now();
LocalTime time = LocalTime.now();
LocalDateTime dateTime = LocalDateTime.now();

// 특정 날짜/시간 생성
LocalDate specificDate = LocalDate.of(2023, 12, 25);
LocalTime specificTime = LocalTime.of(14, 30, 45);
```

**ZonedDateTime**

```java
ZonedDateTime zonedDateTime = ZonedDateTime.now();
ZonedDateTime seoulTime = ZonedDateTime.now(ZoneId.of("Asia/Seoul"));
```

### 3.3 날짜/시간 조작

```java
LocalDate date = LocalDate.now();
LocalDate nextWeek = date.plusWeeks(1);
LocalDate lastMonth = date.minusMonths(1);

// with 메서드로 특정 필드만 변경
LocalDate firstDay = date.withDayOfMonth(1);
```

### 3.4 DateTimeFormatter

```java
LocalDateTime now = LocalDateTime.now();
DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");
String formattedDate = now.format(formatter);

// 문자열을 날짜로 파싱
LocalDate parsedDate = LocalDate.parse("2023-12-25",
    DateTimeFormatter.ofPattern("yyyy-MM-dd"));
```

## 4. 실무 활용 팁

### 4.1 날짜 비교

```java
LocalDate date1 = LocalDate.of(2023, 12, 25);
LocalDate date2 = LocalDate.of(2023, 12, 31);

boolean isBefore = date1.isBefore(date2); // true
boolean isAfter = date1.isAfter(date2);   // false
boolean isEqual = date1.isEqual(date2);   // false
```

### 4.2 Period와 Duration

```java
// 날짜 간격
LocalDate start = LocalDate.of(2023, 1, 1);
LocalDate end = LocalDate.of(2023, 12, 31);
Period period = Period.between(start, end);
System.out.println(period.getMonths()); // 11

// 시간 간격
LocalTime startTime = LocalTime.of(9, 0);
LocalTime endTime = LocalTime.of(17, 30);
Duration duration = Duration.between(startTime, endTime);
System.out.println(duration.toHours()); // 8
```
