# 예외처리

**예외(Exception)**는 프로그램 실행 중에 발생할 수 있는 예기치 못한 상황으로, 프로그램의 비정상적인 종료를 방지하고 정상적인 실행상태를 유지하기 위해 처리해야 합니다.

## 예외 클래스의 계층구조

```
Object
 └── Throwable
      ├── Error (시스템 레벨 오류)
      └── Exception
           ├── IOException (체크 예외)
           ├── ClassNotFoundException (체크 예외)
           └── RuntimeException (언체크 예외)
                ├── NullPointerException
                ├── IndexOutOfBoundsException
                └── IllegalArgumentException
```

### 예외의 종류

- **체크 예외(Checked Exception)**: 컴파일 시점에 처리 확인, 반드시 예외처리 필요
- **언체크 예외(Unchecked Exception)**: 실행 시점에 발생, RuntimeException의 하위 클래스

## try-catch-finally 문

### 기본 구조

```java
try {
    // 예외가 발생할 가능성이 있는 코드
} catch (ExceptionType1 e) {
    // ExceptionType1 처리
} catch (ExceptionType2 e) {
    // ExceptionType2 처리
} finally {
    // 항상 실행되는 코드 (선택사항)
}
```

### 멀티 catch 블록 (JDK 1.7+)

```java
try {
    // 코드
} catch (ExceptionType1 | ExceptionType2 e) {
    // 여러 예외를 한 번에 처리
}
```

## 예외 발생시키기 (throw)

```java
throw new Exception("예외 메시지");
```

## 메서드에 예외 선언하기 (throws)

```java
public void method() throws IOException, ClassNotFoundException {
    // 메서드 내에서 발생할 수 있는 예외를 선언
}
```

## 사용자 정의 예외

```java
class MyException extends Exception {
    MyException(String msg) {
        super(msg);
    }
}
```

## 예외 되던지기 (Exception Re-throwing)

```java
public void method() throws Exception {
    try {
        // 코드
    } catch (Exception e) {
        // 로깅 등의 처리
        throw e; // 예외를 다시 던짐
    }
}
```

## 연결된 예외 (Chained Exception)

```java
try {
    // 코드
} catch (Exception e) {
    RuntimeException re = new RuntimeException("새로운 예외");
    re.initCause(e); // 원인 예외 설정
    throw re;
}
```

## 주요 예외처리 원칙

1. **구체적인 예외부터 처리**: 하위 클래스 예외를 먼저 catch
2. **적절한 예외 메시지 제공**: 디버깅에 도움이 되는 정보 포함
3. **리소스 정리**: finally 블록이나 try-with-resources 사용
4. **예외 은폐 금지**: 빈 catch 블록 사용 금지

## try-with-resources (JDK 1.7+)

```java
try (FileInputStream fis = new FileInputStream("file.txt")) {
    // 파일 처리
} catch (IOException e) {
    // 예외 처리
}
// 자동으로 fis.close() 호출됨
```

## 실무 활용 팁

- **체크 예외**: 복구 가능한 상황에 사용
- **언체크 예외**: 프로그래밍 오류나 복구 불가능한 상황에 사용
- **로깅**: 예외 발생 시 적절한 로그 남기기
- **사용자 친화적 메시지**: 최종 사용자에게는 기술적 내용보다 이해하기 쉬운 메시지 제공

예외처리는 안정적인 프로그램 작성의 핵심이므로, 각 상황에 맞는 적절한 예외처리 전략을 수립하는 것이 중요합니다.
